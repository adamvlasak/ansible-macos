---
- block:
    - name: provision .zshrc
      template:
        src: zshrc.j2
        dest: "{{ lookup('env','HOME') }}/.zshrc"
      tags:
        - user

    - name: set font smoothing
      community.general.osx_defaults:
        key: AppleFontSmoothing
        host: currentHost
        type: int
        value: "{{ font_smoothing }}"
        state: present
      tags:
        - user

    - name: enable vs code key repeat
      community.general.osx_defaults:
        domain: com.microsoft.VSCode
        key: ApplePressAndHoldEnabled
        type: bool
        value: false
        state: present
      tags:
        - user
  become_user: "{{ user }}"
  become: yes
